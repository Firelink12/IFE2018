<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
</head>

<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script>
        // var btn = document.querySelector("#fade-btn");
        // var oDiv = document.querySelector("#fade-obj");
        // btn.onclick = function() {
        //     setTimeout("timedopacity()", 2000);


        // }

        // function timedopacity() {
        //     oDiv.style.opacity = 0;
        //     btn.attr.disabled = "disabled";
        // }


        // $(document).ready(function() {
        //     $("#fade-btn").click(fun1())
        // });

        // function fun1() {
        //     setTimeout("fadeOut()", 2000);
        //     document.getElementById("fade-btn").innerText = "淡入"
        // }

        // function fadeOut() {

        // }

        var btn = document.querySelector("#fade-btn");
        var oDiv = document.querySelector("#fade-obj");
        btn.onclick = function() {
            if (btn.textContent === "淡出") {
                var i = 100;
                btn.disabled = true;

                function setA() {
                    i -= 1;
                    oDiv.style.opacity = i / 100;
                    if (i == 0) {
                        btn.disabled = false;
                        btn.textContent = "淡入";
                        return null;
                    }
                    setTimeout(setA, 10);
                }
                setA();
            } else {
                btn.disabled = true;
                var i = 0;

                function setB() {
                    i += 1;
                    oDiv.style.opacity = i / 100;
                    if (i == 100) {
                        btn.disabled = false;
                        btn.textContent = "淡出"
                        return null;
                    }
                    setTimeout(setB, 10);
                }
                setB();
            }
        }
    </script>
</body>

</html>
